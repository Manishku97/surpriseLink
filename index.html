<script>
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const message = document.getElementById("message");
const music = document.getElementById("bgMusic");
const heading = document.querySelector("h1");

let yesSize = 1;
let messages = [
    "Are you sure? ü•∫",
    "Think again üò≠",
    "I'll be sad üíî",
    "Last chance üòè",
    "You can't escape üòé"
];

let msgIndex = 0;

// Hide buttons initially
yesBtn.style.display = "none";
noBtn.style.display = "none";

// Typewriter effect
let text = heading.innerText;
heading.innerText = "";
let i = 0;

function typeEffect() {
    if (i < text.length) {
        heading.innerText += text.charAt(i);
        i++;
        setTimeout(typeEffect, 60);
    } else {
        startCountdown();
    }
}
typeEffect();

// Countdown
function startCountdown() {
    let count = 3;
    heading.innerText += "\n\nAnswer in " + count;

    let interval = setInterval(() => {
        count--;
        heading.innerText = text + "\n\nAnswer in " + count;

        if (count <= 0) {
            clearInterval(interval);
            heading.innerText = text;
            yesBtn.style.display = "inline-block";
            noBtn.style.display = "inline-block";
        }
    }, 1000);
}

// Play music on first click
document.body.addEventListener("click", () => {
    music.play();
}, { once: true });

// Move No button
function moveButton() {
    const card = document.querySelector(".card");
    const maxX = card.offsetWidth - noBtn.offsetWidth;
    const maxY = card.offsetHeight - noBtn.offsetHeight;

    noBtn.style.left = Math.random() * maxX + "px";
    noBtn.style.top = Math.random() * maxY + "px";

    yesSize += 0.2;
    yesBtn.style.transform = `scale(${yesSize})`;

    noBtn.innerText = messages[msgIndex % messages.length];
    msgIndex++;
}

noBtn.addEventListener("mouseover", moveButton);
noBtn.addEventListener("touchstart", function(e){
    e.preventDefault();
    moveButton();
});

// Yes click celebration
yesBtn.addEventListener("click", function() {
    message.style.display = "block";
    noBtn.style.display = "none";
    yesBtn.innerHTML = "FOREVER ‚ù§Ô∏è";
    confettiExplosion();
});

// Confetti
function confettiExplosion() {
    for (let i = 0; i < 100; i++) {
        const confetti = document.createElement("div");
        confetti.style.position = "fixed";
        confetti.style.width = "10px";
        confetti.style.height = "10px";
        confetti.style.background = "hsl(" + Math.random()*360 + ",100%,50%)";
        confetti.style.top = "0px";
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.opacity = 1;
        confetti.style.transition = "transform 3s linear, opacity 3s";
        document.body.appendChild(confetti);

        setTimeout(() => {
            confetti.style.transform = "translateY(100vh)";
            confetti.style.opacity = 0;
        }, 50);

        setTimeout(() => {
            confetti.remove();
        }, 3000);
    }
}
</script>
